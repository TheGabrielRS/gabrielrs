<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/public/templates/template.xhtml">

	<ui:define name="metadata">
	</ui:define>

	<ui:define name="content">
	
	<p:commandButton value="Listar" action="#{manterIncidenteMB.lista()}" />	
	<p:commandButton value="Voltar" action="login" />
	
	<p:panel header="Lista de Incidentes" style="margin: 20px">
		
		<f:event type="postAddToView" listener="#{manterIncidenteMB.lista}" />
		
		
		<h:form>
		<p:dataTable var="inc" value="#{manterIncidenteMB.incidentes}" editable="true" editmode="cell" sortMode="multiple"  selection="#{manterIncidenteMB.incidentes}" >
			
			<p:ajax event="rowEdit" listener="#{manterIncidenteMB.editarIncidente()}" update=":form:msgs"/>
			<p:ajax event="rowEditCancel" listener="#{manterIncidenteMB.cancelarEdicao()}" update=":form:msgs"/>
			
			<p:column headerText="Titulo" sortBy="#{inc.titulo}">
					<p:cellEditor>
						<f:facet name="output"><h:outputText value="#{inc.titulo}" /></f:facet>
						<f:facet name="input"><p:inputText id="tituloInput" value="#{inc.titulo}"/></f:facet>
					</p:cellEditor>
			</p:column>


			<p:column headerText="Data do Incidente" sortBy="#{inc.data}">
					<p:cellEditor>
						<f:facet name="output"><h:outputText value="#{inc.data.toString().split(' ')[0]}"  /></f:facet>
						<f:facet name="input"><p:inputText value="#{inc.data.toString().split(' ')[0]}"  /></f:facet>
					</p:cellEditor>
					
			</p:column>
			
			<p:column headerText="Descrição" sortBy="#{inc.descricao}">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{inc.descricao}" /></f:facet>
					<f:facet name="input"><p:inputText value="#{inc.descricao}" /></f:facet>
				</p:cellEditor>
			</p:column>
			
			<p:column headerText="Editar">
				<p:rowEditor/>
			</p:column>
		
		</p:dataTable>	
		</h:form>	
	</p:panel>
	
	
	
	
	
	</ui:define>

</ui:composition>

	